<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.ict.finalpj.domain.deal.mapper.DealSatisfactionMapper">

  <!-- 만족도 등록 -->
  <insert id="getDealSatisfactionInsert" parameterType="DealSatisfactionVO">
    INSERT INTO pjdealSatisfaction (
      dealSatisSellerUserIdx, 
      dealSatisSellerNick, 
      dealSatisBuyerUserIdx, 
      dealSatisBuyerNick, 
      dealSatisBuyerContent, 
      dealSatisBuyerRegDate, 
      dealSatisBuyerScore
    ) 
    VALUES (
      #{dealSellerUserIdx}, 
      #{dealSellerNick}, 
      #{userIdx}, 
      #{nickname}, 
      #{dealSatisBuyerContent}, 
      NOW(), 
      #{dealSatisBuyerScore}
    )
  </insert>

  <!-- 판매자의 평점 조회 -->
  <select id="getDealSatisSellerScore" parameterType="String" resultType="String">
    SELECT dealSatisSellerScore 
    FROM pjuser 
    WHERE userIdx = #{dealSellerUserIdx}
  </select>

</mapper>